# OpenShift AI values with Jupyter Notebooks enabled
# This file extends values-openshift.yaml with notebook-specific configurations
# 
# Usage:
#   helm install fraud-detection . \
#     --namespace fraud-detection \
#     --values values-openshift.yaml \
#     --values values-openshift-with-notebooks.yaml

# Global settings
global:
  openshift: true

# OpenShift-specific features
openshift:
  enabled: true
  routes:
    enabled: true
    tls:
      termination: edge
      insecureEdgeTerminationPolicy: Redirect

# MinIO configuration (subchart) - OpenShift overrides
minio:
  enabled: true
  
  openshift:
    enabled: true
    routes:
      enabled: true
      tls:
        termination: edge
        insecureEdgeTerminationPolicy: Redirect

# LakeFS configuration
lakefs:
  resources:
    limits:
      cpu: "2"
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi

# Notebook configuration - Enabled for OpenShift AI
notebook:
  enabled: true
  username: "admin"
  
  # Notebook image - ODH/RHODS compatible
  image:
    repository: quay.io/modh/odh-minimal-notebook-image-n
    tag: "2024.2"
    pullPolicy: IfNotPresent
    name: "Minimal Python"
  
  # Resource configuration
  resources:
    size: "Medium"
    limits:
      cpu: "4"
      memory: "16Gi"
    requests:
      cpu: "2"
      memory: "8Gi"
  
  # Storage for notebook workspace
  storage:
    size: 20Gi
    # storageClassName: "gp3"  # Uncomment to specify storage class
  
  # Shared memory for ML workloads
  shm:
    enabled: true
    size: 4Gi
  
  # LakeFS connection
  lakefs:
    url: "http://fraud-detection-lakefs:8000"
  
  # MinIO connection
  minio:
    endpoint: "http://fraud-detection-minio:9000"
  
  # OpenShift AI specific settings
  openshiftAI:
    # Update this with your cluster's actual OpenShift AI dashboard route
    # Get it with: oc get route rhods-dashboard -n redhat-ods-applications -o jsonpath='{.spec.host}'
    host: "rhods-dashboard-redhat-ods-applications.apps.your-cluster.example.com"
  
  # Git sync - automatically clone demo notebooks
  gitSync:
    enabled: true
    repo: "https://github.com/rh-aiservices-bu/Fraud-Detection-data-versioning-with-lakeFS.git"
    branch: "main"
    image: "alpine/git:latest"

