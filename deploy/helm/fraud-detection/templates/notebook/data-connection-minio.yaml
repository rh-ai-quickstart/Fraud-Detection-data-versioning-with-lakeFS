{{- if and .Values.notebook.enabled .Values.global.openshift .Values.notebook.openshiftAI.dataConnections.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "fraud-detection.fullname" . }}-minio-connection
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "fraud-detection.labels" . | nindent 4 }}
    app.kubernetes.io/component: notebook
    opendatahub.io/dashboard: "true"
    opendatahub.io/managed: "true"
  annotations:
    opendatahub.io/connection-type: "s3"
    openshift.io/display-name: "MinIO Object Storage (Fraud Detection)"
type: Opaque
stringData:
  AWS_ACCESS_KEY_ID: {{ .Values.minio.secret.user | quote }}
  AWS_SECRET_ACCESS_KEY: {{ .Values.minio.secret.password | quote }}
  AWS_S3_ENDPOINT: {{ .Values.notebook.minio.endpoint | quote }}
  AWS_DEFAULT_REGION: "us-east-1"
  AWS_S3_BUCKET: {{ .Values.notebook.minio.defaultBucket | default "my-storage" | quote }}
{{- end }}

